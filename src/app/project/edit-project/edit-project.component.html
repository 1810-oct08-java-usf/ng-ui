<app-navbar></app-navbar>
<div>
 <div class="my-theme">
    <div>
      <button id="icon" mat-icon-button mat-stroked-button mat-button
                      (click)="back()">
                      <mat-icon>arrow_back</mat-icon>
                  </button>
      <h1 id="title">Edit Project</h1>
    </div>
    <form  #projectForm="ngForm" novalidate>
        <table class="example-full-width" cellspacing="5"><tr>
          <td>
              <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Project Name</mat-label>
                  <mat-error *ngIf="!validForm">Project name is required</mat-error>
                  <input (blur)="checkForValidField(name, batch, trainerName, description, techStack)" id="project_name" 
                  name="projectName" type="text" matInput placeholder="Project Name" [(ngModel)]="projectToUpdate.name" 
                  [ngModelOptions]="{standalone: true}" required #name="ngModel">
                </mat-form-field>
          </td>
          <td>
              <mat-form-field class="example-full-width" appearance="outline">
                    <mat-label>Batch Name</mat-label>
                  <mat-error *ngIf="!validForm">Batch name is required</mat-error>
                  <input (blur)="checkForValidField(name, batch, trainerName, description, techStack)" type="text" name="batchName" 
                  matInput placeholder="Batch Name" [(ngModel)]="projectToUpdate.batch" [ngModelOptions]="{standalone: true}" required #batch="ngModel">
                </mat-form-field>
          </td>
        </tr></table>
      
    
        <table class="example-full-width" cellspacing="5">
          <tr>
            <td>
                <mat-form-field class="example-full-width" appearance="outline">
                        <mat-label>Trainer Name</mat-label>
                    <mat-error *ngIf="!validForm">Trainer name is required</mat-error>
                    <input  (blur)="checkForValidField(name, batch, trainerName, description, techStack)" 
                    type="text" name="trainers" matInput placeholder="Trainer Name" [(ngModel)]="projectToUpdate.trainer" 
                    [ngModelOptions]="{standalone: true}" required #trainerName="ngModel">
                  </mat-form-field>
            </td>
            <td>
            <!--   <mat-form-field class="example-full-width" appearance="outline">
                <mat-label>Tecknology Stack</mat-label>
              <mat-error *ngIf="!validForm">Technology stack is required</mat-error>
              <input type="text"  (blur)="checkForValidField(name, batch, trainerName, description, techStack)" type=text matInput 
              name="stack" placeholder="Project Technology Stack" [(ngModel)]="projectToUpdate.techStack" 
              [ngModelOptions]="{standalone: true}" required #techStack="ngModel">
            </mat-form-field> -->
            <mat-form-field class="example-full-width" appearance="outline">
                <mat-label>Technology Stack</mat-label>
                <mat-error *ngIf="!validForm">Technology stack is required</mat-error>
                <mat-select 
                placeholder="Select Batch" 
                [(ngModel)]="projectToUpdate.techStack"
                [ngModelOptions]="{standalone: true}" required #techStack="ngModel" 
                required #techStack="ngModel">
                  <mat-option *ngFor="let tech of techStackList" [value]="tech">
                    {{tech}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
          </td>
          </tr>
        </table>

        <table class="example-full-width" cellspacing="5"><tr>
            <td>
                <mat-form-field class="example-full-width"  appearance="outline">
                        <mat-label>Description</mat-label>
                    <mat-error *ngIf="!validForm">Description is required</mat-error>
                    <textarea  (blur)="checkForValidField(name, batch, trainerName, description, techStack)" matInput 
                    name="description" placeholder="Project Description" [(ngModel)]="projectToUpdate.description" 
                    [ngModelOptions]="{standalone: true}" #description="ngModel" required></textarea>
                  </mat-form-field>
            </td>
            </tr>
        </table>

          <!-- This exists only to stop the form propagation from hitting the buttons below, enter key was causing issues removing items from the groupmember array-->
          <div class="example-button-row" id="hideMePlease">
            <button mat-raised-button>Basic</button>
            <button mat-raised-button color="primary">Primary</button>
            <button mat-raised-button color="accent">Accent</button>
            <button mat-raised-button color="warn">Warn</button>
            <button mat-raised-button disabled>Disabled</button>      
          </div>
          
        
          <h3>Add a Group Member</h3>
          <mat-form-field>
            <mat-label>Add a Group Member</mat-label>
            <input matInput placeholder="Add Group Member" (keydown.enter)="addGroupMember($event)">
          </mat-form-field>
        
         
          <h3>Select a Group Member to Remove</h3>
          <span *ngFor = "let groupMember of this.projectToUpdate.groupMembers">
            <span>
             <button mat-raised-button (click)= "removeGroupMember($event)" >{{groupMember}}</button>
            </span>
          </span>
        
            <br>
           <button (click)="submitForm()" [disabled]="(!name.valid) || (!batch.valid) || (!trainerName.valid) || 
          (!description.valid) || (!techStack.valid)" type="submit" id="submit" mat-flat-button color="accent">Update Project</button>
          <br>
          <br>
          <br>
          <br>
          <button (click)="deleteProject()" id="submit" mat-flat-button color="accent">Delete Project</button>  
          <br>
          <br>    
        </form>
      
 </div>