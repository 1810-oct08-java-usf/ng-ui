<!-- <mat-grid-list cols="4" rowHeight="500px">
  <mat-grid-tile *ngFor="let project of projects">
    <app-project-card [project]="project"></app-project-card>
  </mat-grid-tile>
</mat-grid-list> -->

<div id="view-project-layout">
  <mat-form-field>
    <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filter">
  </mat-form-field>

  <div class="table-container mat-elevation-z8 my-theme" color="primary">
    <table mat-table [dataSource]="dataSource" multiTemplateDataRows matSort>

      <!-- Name Column -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Name </th>
        <td mat-cell *matCellDef="let project"> {{project.name}} </td>
      </ng-container>

      <!-- Batch Column -->
      <ng-container matColumnDef="batch">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Batch </th>
        <td mat-cell *matCellDef="let project"> {{project.batch}} </td>
      </ng-container>

      <!-- Trainer Column (Assume there are only one trainer per batch) -->
      <ng-container matColumnDef="fullName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Trainer </th>
        <td mat-cell *matCellDef="let project"> {{project.fullName}} </td>
      </ng-container>

      <!-- Tech Stack Column -->
      <ng-container matColumnDef="techStack">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Stack </th>
        <td mat-cell *matCellDef="let project"> {{project.techStack}} </td>
      </ng-container>

      <!-- Status Column -->
      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Status </th>
        <td mat-cell *matCellDef="let project"> {{project.status}} </td>
      </ng-container>

      <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->
      <ng-container matColumnDef="expandedDetail">
        <td mat-cell *matCellDef="let project" [attr.colspan]="displayedColumns.length">
          <div class="project-detail" [@detailExpand]="project == expandedProject ? 'expanded' : 'collapsed'">

            <div id="expanded-row" class="container" fxLayout="row" fxLayoutGap="5%">
              <div fxLayout.xs="column">
                <button id="arrow-icon" mat-icon-button mat-stroked-button color="primary" mat-button matTooltip="Previous"
                  matTooltipPosition="left" (click)="previousImage(project.screenShots.length)">
                  <mat-icon>skip_previous</mat-icon>
                </button>
                <img class="project-image" alt="Image Unavailable" [src]="project.screenShots[imagePage%project.screenShots.length]" onerror="this.src='../../../assets/icons/RPM_Logo.png'">
                <button id="arrow-icon" mat-icon-button mat-stroked-button color="primary" mat-button matTooltip="Next"
                  matTooltipPosition="right" (click)="nextImage(project.screenShots.length)">
                  <mat-icon>skip_next</mat-icon>
                </button>
              </div>
              <div class="container"  fxLayout.xs="column">
                <div fxLayout="row">
                  <strong> Group Members: </strong>
                  <textarea id="project-members" rows="3" cols="100" placeholder="No Project Description" disabled=true
                    readonly>
  {{project.groupMembers.join(', ')}}
                  </textarea>
                </div>
                <div fxLayout="row">
                  <div class="project-description">
                    <strong> Description: </strong>
                    <textarea id="project-description" rows="10" cols="100" placeholder="No Project Description"
                      disabled=true readonly>
  {{project.description}}
                    </textarea>
                  </div>
                </div>
              </div>
              <div fxLayout.xs="column">
                <div class="container" fxLayout="row">
                  <a target="_blank" [routerLink]="['/projects', project.id, 'codebase']">
                    <button mat-icon-button mat-stroked-button color="primary" mat-button matTooltip="Codebase"
                      matTooltipPosition="left">
                      <mat-icon>folder_special</mat-icon>
                    </button>
                  </a>
                  <a [routerLink]="['/projects', project.id, 'edit']">
                    <button id="icon" mat-icon-button mat-stroked-button color="primary" matTooltip="Edit"
                      matTooltipPosition="right">
                      <mat-icon id="profile-icon">edit</mat-icon>
                    </button>
                  </a>
                </div>
              </div>
            </div>


            <!-- <img class="project-image" src="https://i.ytimg.com/vi/wRx3Uvcktm8/maxresdefault.jpg"> -->
            <!-- <angular-image-slider [images]="project.screenShots"></angular-image-slider>
          <div class="project-diagram">
            <div class="project-name"> {{project.name}} </div>
            <div class="project-weight"> {{project.techStack}} </div>
          </div>
          <div class="project-description">
            Description: {{project.description}}
          </div>
          <div *ngFor="let member of project.groupMembers">
            <p>{{member}}</p>
          </div>
          <div *ngFor="let codebase of project.zipLinks">
            <a target="_blank" [href]="codebase">
              <button mat-icon-button mat-stroked-button color="primary" mat-button>
                <mat-icon>folder_special</mat-icon>
              </button>
            </a>
          </div> -->
          </div>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
      <tr mat-row *matRowDef="let project; columns: displayedColumns;" class="project-row" [class.expanded-row]="expandedProject === project"
        (click)="expandedProject = expandedProject === project ? null : project; canEdit($event)">
      </tr>
      <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="detail-row"></tr>
    </table>
  </div>
</div>